#include <node.h>
#include <iostream>

using namespace v8;
using namespace std;

void write(const FunctionCallbackInfo<Value>& args) {
	String::Utf8Value output(args[0]->ToString());
	string strConverted = string(*output);
	cout << strConverted;
}

void read(const FunctionCallbackInfo<Value>& args) {
	Isolate* isolate = args.GetIsolate();
	string input;
	getline(cin, input);
	args.GetReturnValue().Set(String::NewFromUtf8(isolate, input.c_str()));
}

void init(Handle<Object> exports) {
	NODE_SET_METHOD(exports, "read", read);
	NODE_SET_METHOD(exports, "write", write);
}

NODE_MODULE(console, init)